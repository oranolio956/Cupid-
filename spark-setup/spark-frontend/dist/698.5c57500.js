"use strict";(self.webpackChunkspark=self.webpackChunkspark||[]).push([[284,698],{20053:(U,P,a)=>{a.r(P),a.d(P,{default:()=>c});function d(l){var i,f,r="";if(typeof l=="string"||typeof l=="number")r+=l;else if(typeof l=="object")if(Array.isArray(l))for(i=0;i<l.length;i++)l[i]&&(f=d(l[i]))&&(r&&(r+=" "),r+=f);else for(i in l)l[i]&&(r&&(r+=" "),r+=i);return r}function c(){for(var l=0,i,f,r="";l<arguments.length;)(i=arguments[l++])&&(f=d(i))&&(r&&(r+=" "),r+=f);return r}},37848:(U,P,a)=>{a.d(P,{default:()=>C});var d=a(68275),c=a(96540),l=a(55794),i=a.n(l),f=Object.defineProperty,r=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,h=(_,o,s)=>o in _?f(_,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):_[o]=s,L=(_,o)=>{for(var s in o||(o={}))O.call(o,s)&&h(_,s,o[s]);if(r)for(var s of r(o))D.call(o,s)&&h(_,s,o[s]);return _};function T(_){const[o,s]=(0,c.useState)(!0),[I,S]=(0,c.useState)({left:0,top:0,bottom:0,right:0}),A=(0,c.useRef)(null),K=(n,t)=>{var e;const{clientWidth:g,clientHeight:v}=window.document.documentElement,u=(e=A.current)==null?void 0:e.getBoundingClientRect();!u||o||S({left:-u.left+t.x,right:g-(u.right-t.x),top:-u.top+t.y,bottom:v-(u.bottom-t.y)})};return c.createElement(d.A,L({title:c.createElement("div",{style:{width:"100%",cursor:"move"},onMouseOver:()=>{o&&_.draggable&&s(!1)},onMouseOut:()=>{s(!0)},onFocus:()=>{},onBlur:()=>{s(!0)}},_.modalTitle),modalRender:n=>c.createElement(i(),{disabled:o||!_.draggable,bounds:I,onStart:(t,e)=>K(t,e)},c.createElement("div",{ref:A},n))},_),_.children)}const C=T},66286:(U,P,a)=>{a.d(P,{default:()=>K});var d=a(96540),c=a(50400),l=a(79478),i=a(21086),f=a(95005),r=a(75427),O=a(47730),D=a(31331),h=a(37848),L=a(80581),T=Object.defineProperty,C=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(n,t,e)=>t in n?T(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,I=(n,t)=>{for(var e in t||(t={}))_.call(t,e)&&s(n,e,t[e]);if(C)for(var e of C(t))o.call(t,e)&&s(n,e,t[e]);return n},S=(n,t,e)=>new Promise((g,v)=>{var u=E=>{try{y(e.next(E))}catch(p){v(p)}},B=E=>{try{y(e.throw(E))}catch(p){v(p)}},y=E=>E.done?g(E.value):Promise.resolve(E.value).then(u,B);y((e=e.apply(n,t)).next())});function A(n){const[t,e]=(0,d.useState)(!1),g=[{key:"Name",title:O.Ay.t("PROCMGR.PROCESS"),dataIndex:"name",ellipsis:!0,width:120},{key:"Pid",title:"Pid",dataIndex:"pid",ellipsis:!0,width:40},{key:"Option",width:40,title:"",dataIndex:"name",valueType:"option",ellipsis:!0,render:(R,M)=>y(M)}],v={show:!0,reload:!1,density:!1,setting:!1},u=(0,d.useRef)(),B=(0,d.useMemo)(()=>(0,D.x)({height:300}),[]);(0,d.useEffect)(()=>{n.open&&e(!1)},[n.device,n.open]);function y(R){return[d.createElement(i.A,{key:"kill",title:O.Ay.t("PROCMGR.KILL_PROCESS_CONFIRM"),onConfirm:E.bind(null,R.pid)},d.createElement("a",null,O.Ay.t("PROCMGR.KILL_PROCESS")))]}function E(R){(0,r.Em)("/api/device/process/kill",{pid:R,device:n.device.id}).then(M=>{M.data.code===0&&(l.Ay.success(O.Ay.t("PROCMGR.KILL_PROCESS_SUCCESSFULLY")),u.current.reload())})}function p(R){return S(this,null,function*(){yield(0,r.zR)(300);let M=yield(0,r.Em)("/api/device/process/list",{device:n.device.id});e(!1);let m=M.data;return m.code===0?(m.data.processes=m.data.processes.sort((W,b)=>b.pid-W.pid),{data:m.data.processes,success:!0,total:m.data.processes.length}):{data:[],success:!1,total:0}})}return d.createElement(h.default,I({draggable:!0,maskClosable:!1,destroyOnClose:!0,modalTitle:O.Ay.t("PROCMGR.TITLE"),footer:null,width:500,bodyStyle:{padding:0}},n),d.createElement(f.Ay,{rowKey:"pid",tableStyle:{paddingTop:"20px",minHeight:"355px",maxHeight:"355px"},scroll:{scrollToFirstRowOnChange:!0,y:300},search:!1,size:"small",loading:t,onLoadingChange:e,options:v,columns:g,request:p,pagination:!1,actionRef:u,components:B}),d.createElement(c.A,{style:{right:"59px"},className:"header-button",icon:d.createElement(L.A,null),onClick:()=>{u.current.reload()}}))}const K=A}}]);
