"use strict";(self.webpackChunkspark=self.webpackChunkspark||[]).push([[331],{31331:(et,fe,W)=>{W.d(fe,{x:()=>Je});var o=W(96540);var u=function(){return u=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},u.apply(this,arguments)};function M(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var se=typeof W.g=="object"&&W.g&&W.g.Object===Object&&W.g,ve=se,he=typeof self=="object"&&self&&self.Object===Object&&self,ge=ve||he||Function("return this")(),Q=ge,be=Q.Symbol,$=be,Z=Object.prototype,pe=Z.hasOwnProperty,ye=Z.toString,A=$?$.toStringTag:void 0;function Te(e){var t=pe.call(e,A),n=e[A];try{e[A]=void 0;var r=!0}catch(c){}var i=ye.call(e);return r&&(t?e[A]=n:delete e[A]),i}var me=Object.prototype,Se=me.toString;function we(e){return Se.call(e)}var Ee="[object Null]",Le="[object Undefined]",q=$?$.toStringTag:void 0;function ee(e){return e==null?e===void 0?Le:Ee:q&&q in Object(e)?Te(e):we(e)}function te(e){return e!=null&&typeof e=="object"}var He="[object Symbol]";function _e(e){return typeof e=="symbol"||te(e)&&ee(e)==He}var Oe=/\s/;function xe(e){for(var t=e.length;t--&&Oe.test(e.charAt(t)););return t}var je=/^\s+/;function Ce(e){return e&&e.slice(0,xe(e)+1).replace(je,"")}function k(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var re=0/0,Ie=/^[-+]0x[0-9a-f]+$/i,Re=/^0b[01]+$/i,Ne=/^0o[0-7]+$/i,Pe=parseInt;function ne(e){if(typeof e=="number")return e;if(_e(e))return re;if(k(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=k(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ce(e);var n=Re.test(e);return n||Ne.test(e)?Pe(e.slice(2),n?2:8):Ie.test(e)?re:+e}var We=function(){return Q.Date.now()},Y=We,Me="Expected a function",Ae=Math.max,De=Math.min;function ie(e,t,n){var r,i,c,l,a,f,g=0,y=!1,p=!1,d=!0;if(typeof e!="function")throw new TypeError(Me);t=ne(t)||0,k(n)&&(y=!!n.leading,p="maxWait"in n,c=p?Ae(ne(n.maxWait)||0,t):c,d="trailing"in n?!!n.trailing:d);function T(h){var S=r,j=i;return r=i=void 0,g=h,l=e.apply(j,S),l}function _(h){return g=h,a=setTimeout(C,t),y?T(h):l}function O(h){var S=h-f,j=h-g,H=t-S;return p?De(H,c-j):H}function x(h){var S=h-f,j=h-g;return f===void 0||S>=t||S<0||p&&j>=c}function C(){var h=Y();if(x(h))return D(h);a=setTimeout(C,O(h))}function D(h){return a=void 0,d&&r?T(h):(r=i=void 0,l)}function s(){a!==void 0&&clearTimeout(a),g=0,r=f=i=a=void 0}function I(){return a===void 0?l:D(Y())}function L(){var h=Y(),S=x(h);if(r=arguments,i=this,f=h,S){if(a===void 0)return _(f);if(p)return clearTimeout(a),a=setTimeout(C,t),T(f)}return a===void 0&&(a=setTimeout(C,t)),l}return L.cancel=s,L.flush=I,L}var $e="[object Number]";function ke(e){return typeof e=="number"||te(e)&&ee(e)==$e}var Be="Expected a function";function Ve(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Be);return k(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ie(e,t,{leading:r,maxWait:t,trailing:i})}function Ye(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var ze=".virtuallist .ant-table-tbody>tr>td>div{-webkit-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;vertical-align:middle;overflow:hidden;text-overflow:ellipsis;width:100%}.virtuallist .ant-table-tbody>tr>td.ant-table-row-expand-icon-cell>div{overflow:inherit}.ant-table-bordered .virtuallist>table>.ant-table-tbody>tr>td{border-right:1px solid #f0f0f0}";Ye(ze);var oe={rowHeight:0,curScrollTop:0,totalLen:0};function Fe(e,t){var n=t.curScrollTop,r=t.rowHeight,i=t.totalLen,c=t.ifScrollTopClear,l=e.curScrollTop;switch(t.type){case"changeTrs":return u(u({},e),{curScrollTop:n});case"initHeight":return u(u({},e),{rowHeight:r});case"changeTotalLen":return i===0&&(l=0),u(u({},e),{totalLen:i,curScrollTop:l});case"reset":return u(u({},e),{curScrollTop:c?0:e.curScrollTop});default:throw new Error}}var z="vtable",w=new Map,le,F=(0,o.createContext)({dispatch:void 0,renderLen:1,start:0,offsetStart:0,rowHeight:oe.rowHeight,totalLen:0,vid:z});function Ue(e){var t=e.children,n=M(e,["children"]);return o.createElement("td",u({},n),o.createElement("div",null,t))}function Ge(e,t){var n=(0,o.useContext)(F),r=n.dispatch,i=n.rowHeight,c=n.totalLen,l=n.vid,a=e.children,f=e.style,g=M(e,["children","style"]),y=(0,o.useRef)(null);return(0,o.useEffect)(function(){var p=function(d){var T,_,O;if(((T=d==null?void 0:d.current)===null||T===void 0?void 0:T.offsetHeight)&&!i&&c){var x=(O=(_=d==null?void 0:d.current)===null||_===void 0?void 0:_.offsetHeight)!==null&&O!==void 0?O:0;w.set(l,u(u({},w.get(l)),{rowItemHeight:x})),r({type:"initHeight",rowHeight:x})}};p(Object.prototype.hasOwnProperty.call(t,"current")?t:y)},[y,r,i,c,t,l]),o.createElement("tr",u({},g,{ref:Object.prototype.hasOwnProperty.call(t,"current")?t:y,style:u(u({},f),{height:i||"auto",boxSizing:"border-box"})}),a)}function Xe(e){var t=e.children,n=M(e,["children"]),r=(0,o.useContext)(F),i=r.renderLen,c=r.start,l=r.dispatch,a=r.vid,f=r.totalLen,g=(0,o.useMemo)(function(){return t[1]},[t]),y=(0,o.useMemo)(function(){var d;return(d=g==null?void 0:g.length)!==null&&d!==void 0?d:0},[g]);(0,o.useEffect)(function(){f!==y&&l({type:"changeTotalLen",totalLen:y!=null?y:0})},[y,l,a,f]);var p=null;return Array.isArray(g)&&g.length?p=[t[0],g.slice(c,c+(i!=null?i:1)).map(function(d){return Array.isArray(d)?d[0]:d})]:p=t,o.createElement("tbody",u({},n),p)}function Ke(e,t){var n,r,i,c,l,a=e.style,f=e.children,g=M(e,["style","children"]),y=a.width,p=M(a,["width"]),d=t!=null?t:{},T=d.vid,_=d.scrollY,O=d.reachEnd,x=d.onScroll,C=d.resetScrollTopWhenDataChange,D=(0,o.useReducer)(Fe,oe),s=D[0],I=D[1],L=(0,o.useRef)(null),h=(0,o.useRef)(null),S=(0,o.useRef)(!1),j=(0,o.useState)((c=(i=(r=(n=f[1])===null||n===void 0?void 0:n.props)===null||r===void 0?void 0:r.data)===null||i===void 0?void 0:i.length)!==null&&c!==void 0?c:0),H=j[0],Qe=j[1];(0,o.useEffect)(function(){Qe(s.totalLen)},[s.totalLen]),(0,o.useEffect)(function(){return function(){console.log("\u9500\u6BC1vid"),w.delete(T)}},[T]),(0,o.useEffect)(function(){var v,m,E,b,R,N,P;S.current=!0,ke((E=(m=(v=f[1])===null||v===void 0?void 0:v.props)===null||m===void 0?void 0:m.data)===null||E===void 0?void 0:E.length)&&I({type:"changeTotalLen",totalLen:(P=(N=(R=(b=f[1])===null||b===void 0?void 0:b.props)===null||R===void 0?void 0:R.data)===null||N===void 0?void 0:N.length)!==null&&P!==void 0?P:0})},[f[1].props.data]);var ae=(0,o.useMemo)(function(){var v="auto";return s.rowHeight&&H&&(v=s.rowHeight*H),v},[s.rowHeight,H]),ce=(0,o.useState)(0),B=ce[0],Ze=ce[1];(0,o.useEffect)(function(){var v,m,E,b=0;typeof _=="string"?b=(E=(m=(v=L.current)===null||v===void 0?void 0:v.parentNode)===null||m===void 0?void 0:m.offsetHeight)!==null&&E!==void 0?E:0:b=_,b<=0&&(b=0),Ze(b)},[_,ae]);var de=(0,o.useMemo)(function(){var v=1;if(s.rowHeight&&H&&B)if(B<=0)v=0;else{var m=(B/s.rowHeight|0)+1+2;v=m}return v},[s.rowHeight,H,B]),V=s.rowHeight?s.curScrollTop/s.rowHeight|0:0,U=s.rowHeight?s.curScrollTop%s.rowHeight:0;return s.curScrollTop&&s.rowHeight&&s.curScrollTop>s.rowHeight?(V-=1,U+=s.rowHeight):V=0,(0,o.useEffect)(function(){var v,m=(v=L.current)===null||v===void 0?void 0:v.parentNode;S!=null&&S.current&&(S.current=!1,C?(m&&(m.scrollTop=0),I({type:"reset",ifScrollTopClear:!0})):I({type:"reset",ifScrollTopClear:!1})),w.has(T)&&w.set(T,u(u({},w.get(T)),{scrollNode:m}))},[H,C,T,f]),(0,o.useEffect)(function(){var v,m=Ve(function(b){var R,N,P,G,X,K,J=(N=(R=b==null?void 0:b.target)===null||R===void 0?void 0:R.scrollTop)!==null&&N!==void 0?N:0,ue=(G=(P=b==null?void 0:b.target)===null||P===void 0?void 0:P.scrollHeight)!==null&&G!==void 0?G:0,qe=(K=(X=b==null?void 0:b.target)===null||X===void 0?void 0:X.clientHeight)!==null&&K!==void 0?K:0;J===ue||J+qe>=ue&&O&&O(),x&&x(),I({type:"changeTrs",curScrollTop:J})},60),E=(v=L==null?void 0:L.current)===null||v===void 0?void 0:v.parentNode;return E&&E.addEventListener("scroll",m),function(){E.removeEventListener("scroll",m)}},[x,O]),le(V,de),o.createElement("div",{className:"virtuallist",ref:L,style:{width:"100%",position:"relative",height:ae,boxSizing:"border-box",paddingTop:s.curScrollTop}},o.createElement(F.Provider,{value:{dispatch:I,rowHeight:(l=w==null?void 0:w.get(T))===null||l===void 0?void 0:l.rowItemHeight,start:V,offsetStart:U,renderLen:de,totalLen:H,vid:T}},o.createElement("table",u({},g,{ref:h,style:u(u({},p),{width:y,position:"relative",transform:"translateY(-"+U+"px)"})}),f)))}function Je(e){var t=e.vid,n=t===void 0?z:t,r=e.height,i=e.onReachEnd,c=e.onScroll,l=e.onListRender,a=e.debounceListRenderMS,f=e.resetTopWhenDataChange,g=f===void 0?!0:f,y=i?!1:g;return w.has(n)||w.set(n,{_id:n}),le=l?ie(function(p,d){l({start:p,renderLen:d})},a!=null?a:300):function(){},{table:function(p){return Ke(p,{vid:n,scrollY:r,reachEnd:i,onScroll:c,onListRender:l,resetScrollTopWhenDataChange:y})},body:{wrapper:Xe,row:Ge,cell:Ue}}}function tt(e){var t=e.row,n=e.y,r=e.vid,i=r===void 0?z:r,c=w.get(i),l=c.scrollNode,a=c.rowItemHeight;return t?t-1>0?l.scrollTop=(t-1)*(a!=null?a:0):l.scrollTop=0:l.scrollTop=n!=null?n:0,{vid:i,rowItemHeight:a}}}}]);
