"use strict";(self.webpackChunkspark=self.webpackChunkspark||[]).push([[800,921],{86010:(W,P,t)=>{t.r(P),t.d(P,{default:()=>u});function d(l){var i,_,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l))for(i=0;i<l.length;i++)l[i]&&(_=d(l[i]))&&(n&&(n+=" "),n+=_);else for(i in l)l[i]&&(n&&(n+=" "),n+=i);return n}function u(){for(var l=0,i,_,n="";l<arguments.length;)(i=arguments[l++])&&(_=d(i))&&(n&&(n+=" "),n+=_);return n}},47181:(W,P,t)=>{t.r(P),t.d(P,{default:()=>C});var d=t(50146),u=t(67294),l=t(61193),i=t.n(l),_=Object.defineProperty,n=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,h=(c,o,s)=>o in c?_(c,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[o]=s,T=(c,o)=>{for(var s in o||(o={}))O.call(o,s)&&h(c,s,o[s]);if(n)for(var s of n(o))L.call(o,s)&&h(c,s,o[s]);return c};function I(c){const[o,s]=(0,u.useState)(!0),[A,S]=(0,u.useState)({left:0,top:0,bottom:0,right:0}),D=(0,u.useRef)(null),K=(r,a)=>{var e;const{clientWidth:m,clientHeight:v}=window.document.documentElement,f=(e=D.current)==null?void 0:e.getBoundingClientRect();!f||o||S({left:-f.left+a.x,right:m-(f.right-a.x),top:-f.top+a.y,bottom:v-(f.bottom-a.y)})};return u.createElement(d.Z,T({title:u.createElement("div",{style:{width:"100%",cursor:"move"},onMouseOver:()=>{o&&c.draggable&&s(!1)},onMouseOut:()=>{s(!0)},onFocus:()=>{},onBlur:()=>{s(!0)}},c.modalTitle),modalRender:r=>u.createElement(i(),{disabled:o||!c.draggable,bounds:A,onStart:(a,e)=>K(a,e)},u.createElement("div",{ref:D},r))},c),c.children)}const C=I},39274:(W,P,t)=>{t.r(P),t.d(P,{default:()=>K});var d=t(67294),u=t(24565),l=t(48086),i=t(71577),_=t(73701),n=t(81027),O=t(37240),L=t(27865),h=t(47181),T=t(59879),I=Object.defineProperty,C=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(r,a,e)=>a in r?I(r,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[a]=e,A=(r,a)=>{for(var e in a||(a={}))c.call(a,e)&&s(r,e,a[e]);if(C)for(var e of C(a))o.call(a,e)&&s(r,e,a[e]);return r},S=(r,a,e)=>new Promise((m,v)=>{var f=E=>{try{R(e.next(E))}catch(y){v(y)}},B=E=>{try{R(e.throw(E))}catch(y){v(y)}},R=E=>E.done?m(E.value):Promise.resolve(E.value).then(f,B);R((e=e.apply(r,a)).next())});function D(r){const[a,e]=(0,d.useState)(!1),m=[{key:"Name",title:O.ZP.t("PROCMGR.PROCESS"),dataIndex:"name",ellipsis:!0,width:120},{key:"Pid",title:"Pid",dataIndex:"pid",ellipsis:!0,width:40},{key:"Option",width:40,title:"",dataIndex:"name",valueType:"option",ellipsis:!0,render:(p,M)=>R(M)}],v={show:!0,reload:!1,density:!1,setting:!1},f=(0,d.useRef)(),B=(0,d.useMemo)(()=>(0,L.i)({height:300}),[]);(0,d.useEffect)(()=>{r.open&&e(!1)},[r.device,r.open]);function R(p){return[d.createElement(u.Z,{key:"kill",title:O.ZP.t("PROCMGR.KILL_PROCESS_CONFIRM"),onConfirm:E.bind(null,p.pid)},d.createElement("a",null,O.ZP.t("PROCMGR.KILL_PROCESS")))]}function E(p){(0,n.WY)("/api/device/process/kill",{pid:p,device:r.device.id}).then(M=>{M.data.code===0&&(l.ZP.success(O.ZP.t("PROCMGR.KILL_PROCESS_SUCCESSFULLY")),f.current.reload())})}function y(p){return S(this,null,function*(){yield(0,n.pQ)(300);let M=yield(0,n.WY)("/api/device/process/list",{device:r.device.id});e(!1);let g=M.data;return g.code===0?(g.data.processes=g.data.processes.sort((U,b)=>b.pid-U.pid),{data:g.data.processes,success:!0,total:g.data.processes.length}):{data:[],success:!1,total:0}})}return d.createElement(h.default,A({draggable:!0,maskClosable:!1,destroyOnClose:!0,modalTitle:O.ZP.t("PROCMGR.TITLE"),footer:null,width:500,bodyStyle:{padding:0}},r),d.createElement(_.ZP,{rowKey:"pid",tableStyle:{paddingTop:"20px",minHeight:"355px",maxHeight:"355px"},scroll:{scrollToFirstRowOnChange:!0,y:300},search:!1,size:"small",loading:a,onLoadingChange:e,options:v,columns:m,request:y,pagination:!1,actionRef:f,components:B}),d.createElement(i.Z,{style:{right:"59px"},className:"header-button",icon:d.createElement(T.Z,null),onClick:()=>{f.current.reload()}}))}const K=D}}]);
